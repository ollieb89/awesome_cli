<div class="dashboard-grid">
  <!-- Recent Backtests Card -->
  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Recent Backtests</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="backtests$ | async" class="mat-elevation-z1">
        <ng-container matColumnDef="strategy">
          <th mat-header-cell *matHeaderCellDef> Strategy </th>
          <td mat-cell *matCellDef="let b"> {{ b.strategy_name }} </td>
        </ng-container>

        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let b"> {{ b.asset }} </td>
        </ng-container>

        <ng-container matColumnDef="return">
          <th mat-header-cell *matHeaderCellDef> Return </th>
          <td mat-cell *matCellDef="let b"> {{ b.metrics?.total_return | percent:'1.1-2' }} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['strategy', 'symbol', 'return']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['strategy', 'symbol', 'return'];"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Strategies Card -->
  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Active Strategies</mat-card-title>
    </mat-card-header>
    <mat-card-content>
       <mat-list>
          <mat-list-item *ngFor="let s of strategies$ | async">
             <h3 matLine> {{s.name}} </h3>
             <p matLine> {{s.description}} </p>
          </mat-list-item>
       </mat-list>
    </mat-card-content>
  </mat-card>

  <!-- Top Assets Card -->
  <mat-card class="dashboard-card">
    <mat-card-header>
      <mat-card-title>Top Assets</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <mat-list-item *ngFor="let asset of assets$ | async">
          <mat-icon matListIcon *ngIf="asset.type === 'crypto'">currency_bitcoin</mat-icon>
          <mat-icon matListIcon *ngIf="asset.type !== 'crypto'">attach_money</mat-icon>
          <h3 matLine> {{asset.symbol}} </h3>
          <p matLine> {{asset.name}} </p>
          <div mat-line *ngIf="!asset.active" style="color: grey; font-size: small;"> Inactive </div>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
  </mat-card>
</div>
